

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Using Pybald &mdash; Pybald 0.2.0 documentation</title>
    
    <link rel="stylesheet" href="_static/haiku.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/print.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '0.2.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/theme_extras.js"></script>
    <link rel="top" title="Pybald 0.2.0 documentation" href="index.html" />
    <link rel="next" title="Magic" href="magic.html" />
    <link rel="prev" title="Quick Start" href="getting_started.html" /> 
  </head>
  <body>
      <div class="header"><img class="rightlogo" src="_static/pybald.png" alt="Logo"/><h1 class="heading"><a href="index.html">
          <span>Pybald 0.2.0 documentation</span></a></h1>
        <h2 class="heading"><span>Using Pybald</span></h2>
      </div>
      <div class="topnav">
      
        <p>
        «&#160;&#160;<a href="getting_started.html">Quick Start</a>
        &#160;&#160;::&#160;&#160;
        <a class="uplink" href="index.html">Contents</a>
        &#160;&#160;::&#160;&#160;
        <a href="magic.html">Magic</a>&#160;&#160;»
        </p>

      </div>
      <div class="content">
        
        
  <div class="section" id="using-pybald">
<h1>Using Pybald<a class="headerlink" href="#using-pybald" title="Permalink to this headline">¶</a></h1>
<div class="section" id="a-quick-note-on-naming-conventions">
<h2>A Quick Note on Naming Conventions<a class="headerlink" href="#a-quick-note-on-naming-conventions" title="Permalink to this headline">¶</a></h2>
<p>Pybald tries to bridge the convention over configuration approach and the explicit approach to creating a web application. For the basics of the web framework, it tends to favor the CoC approach. Pybald has a few naming conventions that are expected and may cause confusion if not understood.</p>
<div class="section" id="naming-controllers">
<h3>Naming Controllers<a class="headerlink" href="#naming-controllers" title="Permalink to this headline">¶</a></h3>
<p>Controllers are implemented as Python classes and are therefore expected to follow the PEP8 naming standard and be named in the StudlyCaps format (otherwise known as CamelCase). Additionally, while not strictly required, controller names usually contain the suffix <tt class="docutils literal"><span class="pre">Controller</span></tt> (e.g. <tt class="docutils literal"><span class="pre">UserProfileController</span></tt>).</p>
<p>When the pybald route map is generated, the controller class name is converted to underscore_separated format and &#8216;_controller&#8217; is stripped if present. Following the example above, the route map would contain the identifier <tt class="docutils literal"><span class="pre">user_profile</span></tt> for the controller. When creating connections in the url mapping, the controller identifier would be used for the controller argument.</p>
</div>
<div class="section" id="naming-models">
<h3>Naming Models<a class="headerlink" href="#naming-models" title="Permalink to this headline">¶</a></h3>
<p>Models are also implemented as Python classes and are expected to follow the PEP8 style guide and be named in the StudlyCaps style. Model class names are usually expected to be singular nouns (User not Users).</p>
<p>When pybald models are synchronized with a databse, by default the underlying tables are named by converting the StudlyCaps name into an underscore_separated form and pluralized. Therefore a <tt class="docutils literal"><span class="pre">UserProfile</span></tt> model will (by default) create a <tt class="docutils literal"><span class="pre">user_profiles</span></tt> database table. Obviously an explicit table name can also be provided to any model to override this default behavior.</p>
</div>
<div class="section" id="naming-modules">
<h3>Naming Modules<a class="headerlink" href="#naming-modules" title="Permalink to this headline">¶</a></h3>
<p>All modules are expected to also follow the PEP8 style guide and be named in the underscore_separated style.</p>
</div>
</div>
<div class="section" id="structure-of-a-pybald-application">
<h2>Structure of a Pybald Application<a class="headerlink" href="#structure-of-a-pybald-application" title="Permalink to this headline">¶</a></h2>
<p>A Pybald application is configured, at least partially, by the directory structure of the <em>project</em>. Unless overridden, the default pybald router behavior will look for python module files in certain paths and will import them which &#8220;activates&#8221; them for use.</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">./app</span></tt></dt>
<dd><dl class="first last docutils">
<dt>This is the primary application directory containing the controllers, views and models</dt>
<dd><dl class="first last docutils">
<dt><tt class="docutils literal"><span class="pre">./app/controllers</span></tt></dt>
<dd>All controller files for the project</dd>
<dt><tt class="docutils literal"><span class="pre">./app/models</span></tt></dt>
<dd>Models for the project</dd>
<dt><tt class="docutils literal"><span class="pre">./app/middleware</span></tt></dt>
<dd><em>optional</em> - Any project specific WSGI middleware</dd>
<dt><tt class="docutils literal"><span class="pre">./app/views</span></tt></dt>
<dd>Templates for the project</dd>
<dt><tt class="docutils literal"><span class="pre">./app/urls.py</span></tt></dt>
<dd>Url patterns to match against</dd>
</dl>
</dd>
</dl>
</dd>
<dt><tt class="docutils literal"><span class="pre">./public</span></tt></dt>
<dd>Static content like images, css and javascript</dd>
<dt><tt class="docutils literal"><span class="pre">./project.py</span></tt></dt>
<dd>Configuration file for the project.</dd>
<dt><tt class="docutils literal"><span class="pre">./environment.py</span></tt></dt>
<dd>Local, environment-specific, configuration overrides (e.g. Production, Development, Test)</dd>
<dt><tt class="docutils literal"><span class="pre">./startup</span></tt></dt>
<dd>Web server configuration, startup scripts.</dd>
<dt><tt class="docutils literal"><span class="pre">./utilities</span></tt></dt>
<dd>Project utility scripts.</dd>
<dt><tt class="docutils literal"><span class="pre">./tmp</span></tt></dt>
<dd><dl class="first last docutils">
<dt>Temporary files</dt>
<dd><dl class="first last docutils">
<dt><tt class="docutils literal"><span class="pre">./viewscache</span></tt></dt>
<dd><em>temporary</em> The template engine&#8217;s file cache for views</dd>
</dl>
</dd>
</dl>
</dd>
<dt><tt class="docutils literal"><span class="pre">./wsgi</span></tt></dt>
<dd><dl class="first last docutils">
<dt>The directory containing the primary WSGI application</dt>
<dd><dl class="first last docutils">
<dt><tt class="docutils literal"><span class="pre">./myapp.py</span></tt></dt>
<dd>The WSGI app.</dd>
</dl>
</dd>
</dl>
</dd>
</dl>
<p>Most of your application code will be in the <tt class="docutils literal"><span class="pre">app</span></tt> directory which should contain at least these three directories <tt class="docutils literal"><span class="pre">controllers</span></tt>, <tt class="docutils literal"><span class="pre">views</span></tt>, and <tt class="docutils literal"><span class="pre">models</span></tt>.</p>
<p>A Pybald application consists of the following parts:</p>
<ul class="simple">
<li>A webserver</li>
<li>A <em>WSGI pipeline</em><ul>
<li>A Router/Dispatcher WSGI module</li>
<li>User defined controllers, models, and views</li>
<li>Any additional WSGI middleware</li>
</ul>
</li>
<li>Static content: images, css, javascript</li>
</ul>
<p>The heart of a Pybald application is the <em>WSGI pipeline</em>. The pipeline is defined in the file <tt class="docutils literal"><span class="pre">./wsgi/myapp.py</span></tt>. The WSGI pipeline is your application as well as how your webserver of choice will communicate with your application. <cite>myapp.py</cite> can be used to connect to any WSGI compliant webserver (Apache, nginx, uWSGI, etc...), or it can be run directly which invokes a built-in testing server from the command line.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># The main application pipeline</span>
<span class="c"># Include all WSGI middleware here. The order of</span>
<span class="c"># web transaction will flow from the bottom of this list</span>
<span class="c"># to the top, and then back out. The pybald Router</span>
<span class="c"># should usually be the first item listed.</span>
<span class="c"># ----------------------------------</span>
<span class="n">app</span> <span class="o">=</span> <span class="n">Router</span><span class="p">(</span><span class="n">routes</span><span class="o">=</span><span class="n">my_project</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">urls</span><span class="o">.</span><span class="n">map</span><span class="p">)</span>
<span class="c"># app = UserManager(app, user_class=User)</span>
<span class="c"># app = SessionManager(app, session_class=Session)</span>
<span class="c"># app = ErrorMiddleware(app, error_controller=None)</span>
<span class="c"># app = DbMiddleware(app)</span>
<span class="c"># ----------------------------------</span>
<span class="c">#    ↑↑↑                  ↓↓↓</span>
<span class="c">#    ↑↑↑                  ↓↓↓</span>
<span class="c">#   Request              Response</span>
</pre></div>
</div>
<p>Invoking the development web server from the command line should look similar to starting the console (in fact the same code executes). The webserver log is dumped to the console so you can monitor transactions.</p>
<div class="highlight-sh"><div class="highlight"><pre>~/test_project<span class="nv">$ </span>python wsgi/myapp.py
Route name Methods Path
home               /
base               /<span class="o">{</span>controller<span class="o">}</span>/<span class="o">{</span>action<span class="o">}</span>/<span class="o">{</span>id<span class="o">}</span>
                   /<span class="o">{</span>controller<span class="o">}</span>/<span class="o">{</span>action<span class="o">}</span>
                   /<span class="o">{</span>controller<span class="o">}</span>
                   /*<span class="o">(</span>url<span class="o">)</span>/
serving on 0.0.0.0:8080 view at http://127.0.0.1:8080
</pre></div>
</div>
</div>
<div class="section" id="the-pybald-console">
<h2>The Pybald console<a class="headerlink" href="#the-pybald-console" title="Permalink to this headline">¶</a></h2>
<p>The pybald console allows you to interact with your program using the python REPL.</p>
<p>The console automatically loads the route mapping for your application as well as all of the controllers and models for your project. The console allows you to interact with your application directly, experiment with new functionality, play with models, and test and exercise the application.</p>
<p>It also includes a command history per-project.</p>
</div>
</div>


      </div>
      <div class="bottomnav">
      
        <p>
        «&#160;&#160;<a href="getting_started.html">Quick Start</a>
        &#160;&#160;::&#160;&#160;
        <a class="uplink" href="index.html">Contents</a>
        &#160;&#160;::&#160;&#160;
        <a href="magic.html">Magic</a>&#160;&#160;»
        </p>

      </div>

  
    <div class="footer">
        &copy; Copyright 2013, Michael Kowalchik.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
  <!-- <script type="text/javascript">
  var gaJsHost = (("https:" == document.location.protocol) ? 
  "https://ssl." : "http://www.");
  document.write(unescape("%3Cscript src='" + gaJsHost + 
  "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
  </script>
  <script type="text/javascript">
  try {
  var pageTracker = _gat._getTracker("UA-13190724-1");
  pageTracker._trackPageview();
  } catch(err) {}</script> -->

  </body>
</html>